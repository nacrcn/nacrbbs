import{M as l}from"./C4FomA2R.js";const c=(s,r,e)=>new Promise((n,p)=>{const u=new FormData;u.append("file",s);const o=new XMLHttpRequest;o.open("POST",r,!0),o.upload.onprogress=function(t){if(t.lengthComputable&&e){let a=Math.round(t.loaded*100/t.total);a>=100&&(a=99),e(a)}},o.onload=function(){if(o.status===200){const t=JSON.parse(o.responseText);t.code!==200&&l.error("上传失败："+t.msg),e?.(100),n(t)}else l.error("上传失败（HTTP "+o.status+"）"),p(o)},o.onerror=function(){l.error("网络错误，上传失败"),p(o)},o.send(u)}),f=async(s,r)=>{console.log(s);const e=await c(s,"http://127.0.0.1:9999/api/upload/image",n=>{console.log(n),r(n)});return console.log(e),e},d=async(s,r)=>await c(s,"http://127.0.0.1:9999/api/upload/file",n=>{console.log(n)});export{f as a,d as u};
