import{ah as M,B as O,C as w,c as g,o as l,D as S,n as h,E as $,r as B,U,e as H,Y as z,aT as D,m as c,g as y,a as T,s as f,b as m,w as F,ad as R,as as j,ap as V,aq as Z,O as q,ar as Y,V as x,S as G,aC as K,W as X,R as J,a5 as Q,ac as ee,aH as b}from"./CbujNTzC.js";import{a as k}from"./7FLWgqLH.js";const I=()=>{},te=()=>{const{body:e}=document,s=document.documentElement;let t;try{t=(window.top||window.self||window).document.body}catch{}return{height:Math.max(e.scrollHeight,e.offsetHeight,s.clientHeight,s.scrollHeight,s.offsetHeight,t?.scrollHeight||0,t?.clientHeight||0),width:Math.max(e.scrollWidth,e.offsetWidth,s.clientWidth,s.scrollWidth,s.offsetWidth,t?.scrollWidth||0,t?.clientWidth||0)}},_=(()=>{try{return!(typeof window<"u"&&document!==void 0)}catch{return!0}})(),we=_?I:(e,s,t,n=!1)=>{e.addEventListener(s,t,n)},$e=_?I:(e,s,t,n=!1)=>{e.removeEventListener(s,t,n)},Ie=(e,s)=>{if(!e||!s)return!1;let t=s;for(;t;){if(t===e)return!0;t=t.parentNode}return!1},se=e=>{const s=document.createElement("div");return s.setAttribute("class",`arco-overlay arco-overlay-${e}`),s},oe=(e,s)=>{var t;return _?I():(t=document.querySelector(e))!=null?t:void 0},_e=(e,s)=>{if(M(e)){const t=e[0]==="#"?`[id='${e.slice(1)}']`:e;return oe(t)}return e},be=(e,s)=>{const t=e.getBoundingClientRect(),n=s.getBoundingClientRect();return{top:t.top-n.top,bottom:n.bottom-t.bottom,left:t.left-n.left,right:n.right-t.right,width:t.width,height:t.height}},ke=e=>e.tagName==="BODY"?document.documentElement.scrollHeight>window.innerHeight:e.scrollHeight>e.offsetHeight,Ee=e=>e.tagName==="BODY"?window.innerWidth-te().width:e.offsetWidth-e.clientWidth,ne=w({name:"IconHover",props:{prefix:{type:String},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1}},setup(){return{prefixCls:$("icon-hover")}}});function ae(e,s,t,n,a,o){return l(),g("span",{class:h([e.prefixCls,{[`${e.prefix}-icon-hover`]:e.prefix,[`${e.prefixCls}-size-${e.size}`]:e.size!=="medium",[`${e.prefixCls}-disabled`]:e.disabled}])},[S(e.$slots,"default")],2)}var ie=O(ne,[["render",ae]]);const re=["info","success","warning","error"],Me=["onFocus","onFocusin","onFocusout","onBlur","onChange","onBeforeinput","onInput","onReset","onSubmit","onInvalid","onKeydown","onKeypress","onKeyup","onCopy","onCut","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onSelect","autocomplete","autofocus","maxlength","minlength","name","pattern","readonly","required"],le=1e3,ce=5e3,ue=1;class de{constructor(){this.popupStack={popup:new Set,dialog:new Set,message:new Set},this.getNextZIndex=s=>(s==="message"?Array.from(this.popupStack.message).pop()||ce:Array.from(this.popupStack.popup).pop()||le)+ue,this.add=s=>{const t=this.getNextZIndex(s);return this.popupStack[s].add(t),s==="dialog"&&this.popupStack.popup.add(t),t},this.delete=(s,t)=>{this.popupStack[t].delete(s),t==="dialog"&&this.popupStack.popup.delete(s)},this.isLastDialog=s=>this.popupStack.dialog.size>1?s===Array.from(this.popupStack.dialog).pop():!0}}const C=new de;function pe(e,{visible:s,runOnMounted:t}={}){const n=B(0),a=()=>{n.value=C.add(e)},o=()=>{C.delete(n.value,e)},i=()=>e==="dialog"?C.isLastDialog(n.value):!1;return U(()=>s?.value,r=>{r?a():o()},{immediate:!0}),t&&(H(()=>{a()}),z(()=>{o()})),{zIndex:D(n),open:a,close:o,isLastDialog:i}}const fe=w({name:"Message",components:{AIconHover:ie,IconInfoCircleFill:Y,IconCheckCircleFill:q,IconExclamationCircleFill:Z,IconCloseCircleFill:V,IconClose:j,IconLoading:R},props:{type:{type:String,default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0},duration:{type:Number,default:3e3},resetOnUpdate:{type:Boolean,default:!1},resetOnHover:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:s}){const t=$("message");let n=0;const a=()=>{s("close")},o=()=>{e.duration>0&&(n=window.setTimeout(a,e.duration))},i=()=>{n&&(window.clearTimeout(n),n=0)};return H(()=>{o()}),x(()=>{e.resetOnUpdate&&(i(),o())}),G(()=>{i()}),{handleMouseEnter:()=>{e.resetOnHover&&i()},handleMouseLeave:()=>{e.resetOnHover&&o()},prefixCls:t,handleClose:a}}});function he(e,s,t,n,a,o){const i=c("icon-info-circle-fill"),r=c("icon-check-circle-fill"),u=c("icon-exclamation-circle-fill"),W=c("icon-close-circle-fill"),L=c("icon-loading"),A=c("icon-close"),P=c("a-icon-hover");return l(),g("li",{role:"alert",class:h([e.prefixCls,`${e.prefixCls}-${e.type}`,{[`${e.prefixCls}-closable`]:e.closable}]),onMouseenter:s[1]||(s[1]=(...p)=>e.handleMouseEnter&&e.handleMouseEnter(...p)),onMouseleave:s[2]||(s[2]=(...p)=>e.handleMouseLeave&&e.handleMouseLeave(...p))},[e.showIcon&&!(e.type==="normal"&&!e.$slots.icon)?(l(),g("span",{key:0,class:h(`${e.prefixCls}-icon`)},[S(e.$slots,"icon",{},()=>[e.type==="info"?(l(),f(i,{key:0})):e.type==="success"?(l(),f(r,{key:1})):e.type==="warning"?(l(),f(u,{key:2})):e.type==="error"?(l(),f(W,{key:3})):e.type==="loading"?(l(),f(L,{key:4})):y("v-if",!0)])],2)):y("v-if",!0),T("span",{class:h(`${e.prefixCls}-content`)},[S(e.$slots,"default")],2),e.closable?(l(),g("span",{key:1,class:h(`${e.prefixCls}-close-btn`),onClick:s[0]||(s[0]=(...p)=>e.handleClose&&e.handleClose(...p))},[m(P,null,{default:F(()=>[m(A)]),_:1})],2)):y("v-if",!0)],34)}var me=O(fe,[["render",he]]);function ge(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!X(e)}var ve=w({name:"MessageList",props:{messages:{type:Array,default:()=>[]},position:{type:String,default:"top"}},emits:["close","afterClose"],setup(e,s){const t=$("message-list"),{zIndex:n}=pe("message",{runOnMounted:!0});return()=>{let a;return m(K,{class:[t,`${t}-${e.position}`],name:"fade-message",tag:"ul",style:{zIndex:n.value},onAfterLeave:()=>s.emit("afterClose")},ge(a=e.messages.map(o=>{const i={default:k(o.content),icon:k(o.icon)};return m(me,{key:o.id,type:o.type,duration:o.duration,closable:o.closable,resetOnUpdate:o.resetOnUpdate,resetOnHover:o.resetOnHover,onClose:()=>s.emit("close",o.id)},i)}))?a:{default:()=>[a]})}}});class ye{constructor(s,t){this.messageCount=0,this.add=o=>{var i;this.messageCount++;const r=(i=o.id)!=null?i:`__arco_message_${this.messageCount}`;if(this.messageIds.has(r))return this.update(r,o);const u=J({id:r,...o});return this.messages.value.push(u),this.messageIds.add(r),{close:()=>this.remove(r)}},this.update=(o,i)=>{for(let r=0;r<this.messages.value.length;r++)if(this.messages.value[r].id===o){const u=!Q(i.duration);Object.assign(this.messages.value[r],{...i,id:o,resetOnUpdate:u});break}return{close:()=>this.remove(o)}},this.remove=o=>{for(let i=0;i<this.messages.value.length;i++){const r=this.messages.value[i];if(r.id===o){ee(r.onClose)&&r.onClose(o),this.messages.value.splice(i,1),this.messageIds.delete(o);break}}},this.clear=()=>{this.messages.value.splice(0)},this.destroy=()=>{this.messages.value.length===0&&this.container&&(b(null,this.container),document.body.removeChild(this.container),this.container=null,d[this.position]=void 0)};const{position:n="top"}=s;this.container=se("message"),this.messageIds=new Set,this.messages=B([]),this.position=n;const a=m(ve,{messages:this.messages.value,position:n,onClose:this.remove,onAfterClose:this.destroy});(t??E._context)&&(a.appContext=t??E._context),b(a,this.container),document.body.appendChild(this.container)}}const d={},N=[...re,"loading","normal"],v=N.reduce((e,s)=>(e[s]=(t,n)=>{M(t)&&(t={content:t});const a={type:s,...t},{position:o="top"}=a;return d[o]||(d[o]=new ye(a,n)),d[o].add(a)},e),{});v.clear=e=>{var s;e?(s=d[e])==null||s.clear():Object.values(d).forEach(t=>t?.clear())};const E={...v,install:e=>{const s={clear:v.clear};for(const t of N)s[t]=(n,a=e._context)=>v[t](n,a);e.config.globalProperties.$message=s},_context:null};export{ie as I,E as M,we as a,Me as b,Ee as c,_e as d,Ie as e,re as f,be as g,se as h,ke as i,te as j,$e as o,pe as u};
