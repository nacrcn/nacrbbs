import{_ as B}from"./Dh8LvoMP.js";import{B as C}from"./DZyT-3wr.js";import{I}from"./DRQ8spOm.js";import{h as U,r,G as b,c,b as d,a as t,d as g,t as m,j as o,F as V,v as A,w as N,o as p,n as P,q as F,l as S}from"./CbujNTzC.js";import{_ as T}from"./DlAUqK2U.js";import{M as z}from"./C4FomA2R.js";import"./7FLWgqLH.js";const H={class:"TopUpPage"},M={class:"Page"},O={class:"PageHeader"},$={class:"current-balance"},j={class:"amount"},q={class:"Pagecontent"},D={class:"section"},E={class:"amount-grid"},G=["onClick"],J={class:"amount-value"},L={class:"custom-amount"},K={class:"section"},Q={__name:"topup",setup(R){const _=U();_.init();const h=r(_.$state.UserInfo?.n_balance||"0.00"),f=r(0),u=r(null),l=r(!1),v=r([{amount:10,bonus:0},{amount:50,bonus:5},{amount:100,bonus:12},{amount:200,bonus:30},{amount:500,bonus:80},{amount:1e3,bonus:200}]),x=b(()=>f.value>0?f.value:u.value&&u.value>0?u.value:0);b(()=>{const e=x.value,s=v.value.find(i=>i.amount===e);return s?s.bonus:0});const n=r({type:1,price:10}),y=async()=>{l.value=!0;const e=await F().post("/api/CreateOrder",{from:JSON.stringify([n.value]),path:window.location.href});e.code===200?S("/user/order/"+e.data.order):z.error(e.msg),l.value=!1};return(e,s)=>{const i=B,k=I,w=C;return p(),c("div",H,[d(i,{title:"余额充值"}),t("div",M,[t("div",O,[s[2]||(s[2]=t("h2",null,"余额充值",-1)),t("p",$,[s[1]||(s[1]=g("当前余额：",-1)),t("span",j,"¥"+m(o(h)),1)])]),t("div",q,[t("div",D,[s[4]||(s[4]=t("h3",null,"选择充值金额",-1)),t("div",E,[(p(!0),c(V,null,A(o(v),a=>(p(),c("div",{key:a.amount,class:P(["amount-item",{active:o(n).price===a.amount}]),onClick:W=>o(n).price=a.amount},[t("div",J,"¥"+m(a.amount),1)],10,G))),128))]),t("div",L,[d(k,{modelValue:o(n).price,"onUpdate:modelValue":s[0]||(s[0]=a=>o(n).price=a),placeholder:"自定义金额",min:1,max:1e4,style:{width:"200px"}},null,8,["modelValue"]),s[3]||(s[3]=t("span",{class:"unit"},"元",-1))])]),t("div",K,[d(w,{type:"primary",size:"large",loading:o(l),onClick:y,class:"submit-btn"},{default:N(()=>[g(" 立即充值 ¥"+m(o(n).price),1)]),_:1},8,["loading"]),s[5]||(s[5]=t("div",{class:"tips"},[t("p",null,"• 充值成功后余额将立即到账"),t("p",null,"• 如遇问题请联系客服")],-1))])])])])}}},et=T(Q,[["__scopeId","data-v-7bcadf34"]]);export{et as default};
