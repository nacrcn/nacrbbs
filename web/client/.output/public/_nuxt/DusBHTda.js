import{r as m,e as _,X as v,Y as x,c as R,o as b,a as p,k as V}from"./CbujNTzC.js";import{u as w,a as E}from"./Do3eBRyU.js";const B={__name:"RichInput",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"请输入内容..."},height:{type:Number,default:300}},emits:["update:modelValue","update:resources"],setup(c,{emit:f}){const u=c,n=f,i=m(null),d=m(null);let r=null;const g=a=>{const o=[],t=/<img[^>]+src=["']([^"']+)["'][^>]*>/g;let e;for(;(e=t.exec(a))!==null;)o.push({type:1,url:e[1]});const l=/<video[^>]*>\s*<source[^>]+src=["']([^"']+)["'][^>]*>\s*<\/video>/g;for(;(e=l.exec(a))!==null;)o.push({type:2,url:e[1]});return o.sort((h,y)=>y.type-h.type)},s=()=>{if(!r)return;const a=r.getHtml(),o=g(a);n("update:resources",o)};return _(async()=>{const{createEditor:a,createToolbar:o}=await v(async()=>{const{createEditor:t,createToolbar:e}=await import("./YL7jMo20.js");return{createEditor:t,createToolbar:e}},[],import.meta.url);r=a({selector:i.value,config:{placeholder:u.placeholder,onChange(t){const e=t.getHtml();n("update:modelValue",e),s()},MENU_CONF:{uploadImage:{async customUpload(t,e){const l=await E(t,()=>{});e(l.data.url),setTimeout(()=>s(),100)}},uploadVideo:{async customUpload(t,e){const l=await w(t);e(l.data.url),setTimeout(()=>s(),100)}}}},html:u.modelValue,mode:"default"}),o({editor:r,selector:d.value,config:{},mode:"default"}),setTimeout(()=>s(),100)}),x(()=>{r&&(r.destroy(),r=null)}),(a,o)=>(b(),R("div",null,[p("div",{ref_key:"toolbarRef",ref:d,style:{"border-bottom":"1px solid #ccc"}},null,512),p("div",{ref_key:"editorRef",ref:i,style:V(`min-height: ${c.height}px; padding: 10px;`)},null,4)]))}};export{B as _};
