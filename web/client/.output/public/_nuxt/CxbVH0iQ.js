import{_ as L}from"./Dh8LvoMP.js";import{B as F}from"./DZyT-3wr.js";import{R}from"./DTrhiYp5.js";import{r as u,e as S,c as p,b as N,a,F as V,v as z,j as s,s as k,g as I,w as C,q as f,o as c,n as A,d as D,t as n}from"./CbujNTzC.js";import{_ as P}from"./DlAUqK2U.js";import{M as Y}from"./C4FomA2R.js";import"./7FLWgqLH.js";const j={class:"vip-page"},q={class:"Page"},E={class:"Pagecontent"},H={class:"TimeBox"},U={class:"signstatus"},G={key:0},J={key:1,class:"signtrue"},K={class:"signsta"},O={class:"continuousDays"},Q={__name:"sign",setup(W){const i=u(!1);function x(){const e=new Date,t=e.getFullYear(),o=e.getMonth()+1,_=new Date(t,o,0).getDate(),y=Array.from({length:_},(r,$)=>{const w=$+1,b=`${t}-${String(o).padStart(2,"0")}-${String(w).padStart(2,"0")}`;return{day:w,date:b}});return{year:t,month:o,days:y}}function h(e){for(let t=0;t<m.value.length;t++)if(m.value[t].n_time===e)return m.value[t];return!1}const B=()=>{const e=new Date,t=e.getFullYear(),o=e.getMonth()+1,_=e.getDate();return`${t}-${o}-${_}`},m=u([]),d=u([]),v=async()=>{const e=await f().post("/api/checkInList");if(e.code===200){m.value=e.data,d.value=x();for(let t=0;t<d.value.days.length;t++)d.value.days[t].Info=h(d.value.days[t].date);i.value=h(B())}},g=u(!1),M=async()=>{g.value=!0;const e=await f().post("/api/checkIn");e.code===200?v():Y.error(e.msg),g.value=!1},l=u({}),T=async()=>{const e=await f().post("/api/getCheckInReward");e.code===200&&(l.value=e.data)};return S(()=>{v(),T()}),(e,t)=>{const o=L,_=F,y=R;return c(),p("div",j,[N(o,{title:"每日签到"}),a("div",q,[a("div",E,[t[1]||(t[1]=a("p",{class:"title"},"每日签到",-1)),a("div",H,[(c(!0),p(V,null,z(s(d).days,r=>(c(),p("div",{class:A(["TimeBoxTitle",{active:r.Info}])},[D(n(r.day)+" ",1),a("p",U,[r.Info?(c(),p("p",J,n(r.Info.n_reward_type==="1"?"积分":"余额")+"*"+n(r.Info.n_reward_number),1)):(c(),p("p",G,"未签到"))])],2))),256))]),a("div",null,[s(i)?I("",!0):(c(),k(_,{key:0,loading:s(g),type:"primary",class:"signbutton",size:"small",onClick:t[0]||(t[0]=r=>M())},{default:C(()=>[D(" 立即签到 (奖励 "+n(s(l)?.Config?.n_reward_type==="1"?"积分":"余额")+"*"+n(s(l).Today)+") ",1)]),_:1},8,["loading"])),s(i)?(c(),k(y,{key:1,status:"success",title:"今日已签到"},{subtitle:C(()=>[a("p",K,"已发放 "+n(s(i).n_reward_type==="1"?"积分":"余额")+" * "+n(s(i).n_reward_number),1),a("div",O," 您已连续签到"+n(s(i).continuousDays??1)+"天，明日签到将获得"+n(s(l).Tomorrow)+n(s(l).Config.n_reward_type==="1"?"积分":"余额"),1)]),_:1})):I("",!0)])])])])}}},ot=P(Q,[["__scopeId","data-v-d4507812"]]);export{ot as default};
