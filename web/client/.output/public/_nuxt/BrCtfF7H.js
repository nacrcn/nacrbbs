import{_ as J}from"./Dh8LvoMP.js";import{_ as Q,P as W}from"./B_wNtzkc.js";import{B as X}from"./DZyT-3wr.js";import{F as Y,a as Z}from"./DcU8bM7c.js";import{a as ee,R as oe}from"./BpxmKO7-.js";import{T as te}from"./k-1F5wz5.js";import{I as se}from"./DRQ8spOm.js";import"./lDd3phAc.js";import"./BiNgaM9F.js";import"./CWvt8Gu3.js";import{P as ne}from"./C_lFDQdh.js";import{S as le}from"./BC6OM_U-.js";import{B as ae,C as ie,m as C,s as V,o as c,w as i,c as y,g as b,n as g,a as r,D as K,d as k,t as I,b as t,ao as re,ap as pe,aq as ce,O as de,ar as me,as as ue,E as fe,r as $,G as _e,H as ve,I as ye,h as ge,F as Ce,v as ke,j as l,A as R,q as z,z as Ie}from"./CbujNTzC.js";import{_ as $e}from"./DlAUqK2U.js";import{I as be,M as P}from"./C4FomA2R.js";import"./Ba22RDed.js";import"./7FLWgqLH.js";import"./C2r7KKOo.js";import"./CYhUeftq.js";import"./FmfuZiTj.js";import"./BW_FzNZC.js";const we=ie({name:"Alert",components:{IconHover:be,IconClose:ue,IconInfoCircleFill:me,IconCheckCircleFill:de,IconExclamationCircleFill:ce,IconCloseCircleFill:pe},props:{type:{type:String,default:"info"},showIcon:{type:Boolean,default:!0},closable:{type:Boolean,default:!1},title:String,banner:{type:Boolean,default:!1},center:{type:Boolean,default:!1}},emits:{close:o=>!0,afterClose:()=>!0},setup(o,{slots:u,emit:f}){const p=fe("alert"),m=$(!0),A=v=>{m.value=!1,f("close",v)},d=()=>{f("afterClose")},_=_e(()=>[p,`${p}-${o.type}`,{[`${p}-with-title`]:!!(o.title||u.title),[`${p}-banner`]:o.banner,[`${p}-center`]:o.center}]);return{prefixCls:p,cls:_,visible:m,handleClose:A,handleAfterLeave:d}}});function Ve(o,u,f,p,m,A){const d=C("icon-info-circle-fill"),_=C("icon-check-circle-fill"),v=C("icon-exclamation-circle-fill"),a=C("icon-close-circle-fill"),B=C("icon-close"),U=C("icon-hover");return c(),V(re,{name:"zoom-in-top",onAfterLeave:o.handleAfterLeave},{default:i(()=>[o.visible?(c(),y("div",{key:0,role:"alert",class:g(o.cls)},[o.showIcon&&!(o.type==="normal"&&!o.$slots.icon)?(c(),y("div",{key:0,class:g(`${o.prefixCls}-icon`)},[K(o.$slots,"icon",{},()=>[o.type==="info"?(c(),V(d,{key:0})):o.type==="success"?(c(),V(_,{key:1})):o.type==="warning"?(c(),V(v,{key:2})):o.type==="error"?(c(),V(a,{key:3})):b("v-if",!0)])],2)):b("v-if",!0),r("div",{class:g(`${o.prefixCls}-body`)},[o.title||o.$slots.title?(c(),y("div",{key:0,class:g(`${o.prefixCls}-title`)},[K(o.$slots,"title",{},()=>[k(I(o.title),1)])],2)):b("v-if",!0),r("div",{class:g(`${o.prefixCls}-content`)},[K(o.$slots,"default")],2)],2),o.$slots.action?(c(),y("div",{key:1,class:g(`${o.prefixCls}-action`)},[K(o.$slots,"action")],2)):b("v-if",!0),o.closable?(c(),y("div",{key:2,tabindex:"-1",role:"button","aria-label":"Close",class:g(`${o.prefixCls}-close-btn`),onClick:u[0]||(u[0]=(...n)=>o.handleClose&&o.handleClose(...n))},[K(o.$slots,"close-element",{},()=>[t(U,null,{default:i(()=>[t(B)]),_:1})])],2)):b("v-if",!0)],2)):b("v-if",!0)]),_:3},8,["onAfterLeave"])}var N=ae(we,[["render",Ve]]);const Ke=Object.assign(N,{install:(o,u)=>{ve(o,u);const f=ye(u);o.component(f+N.name,N)}}),Pe={class:"TopUpPage"},Ae={class:"Page"},ze={class:"KeyBox"},Be=["onClick"],Ue={class:"KeyInfo"},Te={class:"Title"},Fe={class:"Key"},Se={class:"Time"},Ne={class:"NewKey"},he={class:"NewKeyBox"},Le={class:"KeyInfo"},Ge={class:"Title"},Me={class:"Key"},Re={class:"Time"},Ee={__name:"keys",setup(o){ge().init();const f=$([]),p=$({page:1,pagesize:20,total:0});async function m(){const n=await z().post("/api/getApiKeys",p.value);n.code===200?(f.value=n.data,p.value.total=n.total):P.error(n.message)}m();const A=n=>{if(n.length<=5)return n;const e=n.substring(0,3),T=n.substring(n.length-3),F="*".repeat(n.length-6);return e+F+T},d=$(!1),_=$(!1),v=$(1),a=$({}),B=async()=>{let n;v.value==1?n=await z().post("/api/addApiKey",a.value):n=await z().post("/api/editApiKey",a.value),n.code===200?(P.success(n.message),d.value=!1,m()):P.error(n.message)},U=async n=>{const e=await z().post("/api/delApiKey",{id:n});e.code===200?(P.success(e.message),m()):P.error(e.message)};return(n,e)=>{const T=J,F=Ke,S=X,E=W,H=le,O=C("icon-plus"),j=ne,q=se,w=Z,h=te,L=oe,x=ee,D=Y,G=Q;return c(),y("div",Pe,[t(T,{title:"我的API秘钥"}),r("div",Ae,[t(F,{type:"warning",class:"AlertBox"},{default:i(()=>[...e[12]||(e[12]=[k("请不要将秘钥泄露给他人，这将可能对您造成损失！",-1)])]),_:1}),r("div",ze,[(c(!0),y(Ce,null,ke(l(f),s=>(c(),y("div",{class:"KeyItem",key:s.id,onClick:M=>(_.value=!0,a.value=s)},[r("div",Ue,[r("div",Te,I(s.n_name||"未命名"),1),r("div",Fe,I(A(s.n_key)),1),r("div",Se,I(s.n_time),1)]),r("div",{onClick:e[1]||(e[1]=Ie(()=>{},["stop"])),class:"KeyAction"},[t(H,null,{default:i(()=>[t(S,{size:"mini",type:"text",onClick:M=>(d.value=!0,a.value=s,v.value=2)},{default:i(()=>[...e[13]||(e[13]=[k("编辑",-1)])]),_:1},8,["onClick"]),t(E,{content:"确定删除此API密钥吗？删除后秘钥将立马失效！",type:"warning",onOk:e[0]||(e[0]=M=>U(l(a).id))},{default:i(()=>[t(S,{size:"mini",type:"text",status:"danger"},{default:i(()=>[...e[14]||(e[14]=[k("删除",-1)])]),_:1})]),_:1})]),_:2},1024)])],8,Be))),128)),r("div",{class:"KeyItem",onClick:e[2]||(e[2]=s=>(d.value=!0,a.value={},v.value=1))},[r("div",Ne,[r("div",he,[t(O),e[15]||(e[15]=r("p",null,"创建新秘钥",-1))])])])]),t(j,{onChange:m,onPageSizeChange:m,current:l(p).page,"onUpdate:current":e[3]||(e[3]=s=>l(p).page=s),pageSize:l(p).pagesize,"onUpdate:pageSize":e[4]||(e[4]=s=>l(p).pagesize=s),total:l(p).total,size:"mini","show-total":"","show-page-size":"","page-size-options":[50,100,200,500,1e3]},null,8,["current","pageSize","total"])]),t(G,{modelValue:l(d),"onUpdate:modelValue":e[10]||(e[10]=s=>R(d)?d.value=s:null),Title:l(v)===1?"创建新秘钥":"修改秘钥",Nook:""},{content:i(()=>[t(D,{model:l(a),layout:"vertical"},{default:i(()=>[t(w,{field:"name",label:"名称"},{default:i(()=>[t(q,{modelValue:l(a).n_name,"onUpdate:modelValue":e[5]||(e[5]=s=>l(a).n_name=s)},null,8,["modelValue"])]),_:1}),t(w,{field:"ip_whitelist",label:"IP白名单"},{default:i(()=>[t(h,{modelValue:l(a).n_white,"onUpdate:modelValue":e[6]||(e[6]=s=>l(a).n_white=s),placeholder:"请输入IP白名单，多个IP用逗号分隔","allow-clear":""},null,8,["modelValue"])]),_:1}),t(w,{field:"ip_blacklist",label:"IP黑名单"},{default:i(()=>[t(h,{modelValue:l(a).n_black,"onUpdate:modelValue":e[7]||(e[7]=s=>l(a).n_black=s),placeholder:"请输入IP黑名单，多个IP用逗号分隔","allow-clear":""},null,8,["modelValue"])]),_:1}),t(w,{field:"name",label:"仅白名单访问"},{default:i(()=>[t(x,{modelValue:l(a).n_ipstatus,"onUpdate:modelValue":e[8]||(e[8]=s=>l(a).n_ipstatus=s)},{default:i(()=>[t(L,{value:"0"},{default:i(()=>[...e[16]||(e[16]=[k("否",-1)])]),_:1}),t(L,{value:"1"},{default:i(()=>[...e[17]||(e[17]=[k("是",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(w,null,{default:i(()=>[t(S,{class:"btn-primary",type:"primary",onClick:e[9]||(e[9]=s=>B())},{default:i(()=>[...e[18]||(e[18]=[k("提交",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","Title"]),t(G,{modelValue:l(_),"onUpdate:modelValue":e[11]||(e[11]=s=>R(_)?_.value=s:null),Title:"秘钥详情",Nook:""},{content:i(()=>[r("div",Le,[r("div",Ge,I(l(a).n_name||"未命名"),1),r("div",Me,I(l(a).n_key),1),r("div",Re,I(l(a).n_time),1)])]),_:1},8,["modelValue"])])}}},po=$e(Ee,[["__scopeId","data-v-6d255f9e"]]);export{po as default};
