import{B as X,C as L,m as x,c as se,o as y,s as C,g as ie,n as ce,ap as Le,aq as Ee,O as Re,ad as de,E as M,G as p,r as _,Q as O,U as J,T as U,ac as ze,b as f,K as T,as as Fe,d as Te,Z as Pe,a5 as P,a7 as Me,aD as oe,F as Oe,aK as Ae,w as S,D as w,z as ue,aR as Ne,aS as De,R as Ge,H as We,I as je}from"./CbujNTzC.js";import{b as re,I as Y}from"./C4FomA2R.js";import{u as He,a as fe,B as Ke}from"./DZyT-3wr.js";const Ue=L({name:"FeedbackIcon",components:{IconLoading:de,IconCheckCircleFill:Re,IconExclamationCircleFill:Ee,IconCloseCircleFill:Le},props:{type:{type:String}},setup(e){const t=M("feedback-icon");return{cls:p(()=>[t,`${t}-status-${e.type}`])}}});function qe(e,t,a,s,u,c){const r=x("icon-loading"),v=x("icon-check-circle-fill"),l=x("icon-exclamation-circle-fill"),i=x("icon-close-circle-fill");return y(),se("span",{class:ce(e.cls)},[e.type==="validating"?(y(),C(r,{key:0})):e.type==="success"?(y(),C(v,{key:1})):e.type==="warning"?(y(),C(l,{key:2})):e.type==="error"?(y(),C(i,{key:3})):ie("v-if",!0)],2)}var Qe=X(Ue,[["render",qe]]);const Ze={key:"Enter"},dn={key:"Backspace"},Je=(e,t)=>{const a={...e};for(const s of t)s in a&&delete a[s];return a};function Xe(e,t){const a={};return t.forEach(s=>{const u=s;s in e&&(a[u]=e[u])}),a}function Ye(e){const t=_();function a(){if(!e.value)return;const{selectionStart:u,selectionEnd:c,value:r}=e.value;if(u==null||c==null)return;const v=r.slice(0,Math.max(0,u)),l=r.slice(Math.max(0,c));t.value={selectionStart:u,selectionEnd:c,value:r,beforeTxt:v,afterTxt:l}}function s(){if(!e.value||!t.value)return;const{value:u}=e.value,{beforeTxt:c,afterTxt:r,selectionStart:v}=t.value;if(!c||!r||!v)return;let l=u.length;if(u.endsWith(r))l=u.length-r.length;else if(u.startsWith(c))l=c.length;else{const i=c[v-1],$=u.indexOf(i,v-1);$!==-1&&(l=$+1)}e.value.setSelectionRange(l,l)}return[a,s]}var V=L({name:"Input",inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},size:{type:String},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},placeholder:String,maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},wordLength:{type:Function},wordSlice:{type:Function},inputAttrs:{type:Object},type:{type:String,default:"text"},prepend:String,append:String},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,pressEnter:e=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,slots:a,attrs:s}){const{size:u,disabled:c,error:r,modelValue:v}=O(e),l=M("input"),i=_(),{mergedSize:$,mergedDisabled:m,mergedError:B,feedback:E,eventHandlers:k}=He({size:u,disabled:c,error:r}),{mergedSize:ee}=fe($),[ve,pe]=Ye(i),A=_(e.defaultValue),g=p(()=>{var n;return(n=e.modelValue)!=null?n:A.value});let N=g.value;J(v,n=>{(P(n)||Me(n))&&(A.value="")}),J(g,(n,o)=>{N=o});const D=_(!1),me=p(()=>e.allowClear&&!e.readonly&&!m.value&&!!g.value),R=_(!1),ne=_(""),I=n=>{var o;return ze(e.wordLength)?e.wordLength(n):(o=n.length)!=null?o:0},z=p(()=>I(g.value)),ae=p(()=>B.value||!!(U(e.maxLength)&&e.maxLength.errorOnly&&z.value>h.value)),G=p(()=>U(e.maxLength)&&!!e.maxLength.errorOnly),h=p(()=>U(e.maxLength)?e.maxLength.length:e.maxLength),he=p(()=>{const n=I("a");return Math.floor(h.value/n)}),W=n=>{var o,d;h.value&&!G.value&&I(n)>h.value&&(n=(d=(o=e.wordSlice)==null?void 0:o.call(e,n,h.value))!=null?d:n.slice(0,he.value)),A.value=n,t("update:modelValue",n)},ge=n=>{i.value&&n.target!==i.value&&(n.preventDefault(),i.value.focus())},j=(n,o)=>{var d,b;n!==N&&(N=n,t("change",n,o),(b=(d=k.value)==null?void 0:d.onChange)==null||b.call(d,o))},ye=n=>{var o,d;D.value=!0,t("focus",n),(d=(o=k.value)==null?void 0:o.onFocus)==null||d.call(o,n)},be=n=>{var o,d;D.value=!1,j(g.value,n),t("blur",n),(d=(o=k.value)==null?void 0:o.onBlur)==null||d.call(o,n)},H=n=>{var o,d,b;const{value:K,selectionStart:we,selectionEnd:Ve}=n.target;if(n.type==="compositionend"){if(R.value=!1,ne.value="",h.value&&!G.value&&z.value>=h.value&&I(K)>h.value&&we===Ve){F();return}W(K),t("input",K,n),(d=(o=k.value)==null?void 0:o.onInput)==null||d.call(o,n),F()}else R.value=!0,ne.value=g.value+((b=n.data)!=null?b:"")},F=()=>{ve(),Pe(()=>{i.value&&g.value!==i.value.value&&(i.value.value=g.value,pe())})},_e=n=>{var o,d;const{value:b}=n.target;if(!R.value){if(h.value&&!G.value&&z.value>=h.value&&I(b)>h.value&&n.inputType==="insertText"){F();return}W(b),t("input",b,n),(d=(o=k.value)==null?void 0:o.onInput)==null||d.call(o,n),F()}},xe=n=>{W(""),j("",n),t("clear",n)},Ce=n=>{const o=n.key||n.code;!R.value&&o===Ze.key&&(j(g.value,n),t("pressEnter",n))},$e=p(()=>[`${l}-outer`,`${l}-outer-size-${ee.value}`,{[`${l}-outer-has-suffix`]:!!a.suffix,[`${l}-outer-disabled`]:m.value}]),Be=p(()=>[`${l}-wrapper`,{[`${l}-error`]:ae.value,[`${l}-disabled`]:m.value,[`${l}-focus`]:D.value}]),ke=p(()=>[l,`${l}-size-${ee.value}`]),te=p(()=>Je(s,re)),Ie=p(()=>Xe(s,re)),Se=p(()=>{const n={...Ie.value,...e.inputAttrs};return ae.value&&(n["aria-invalid"]=!0),n}),le=n=>{var o;return f("span",T({class:Be.value,onMousedown:ge},n?void 0:te.value),[a.prefix&&f("span",{class:`${l}-prefix`},[a.prefix()]),f("input",T({ref:i,class:ke.value,value:g.value,type:e.type,placeholder:e.placeholder,readonly:e.readonly,disabled:m.value,onInput:_e,onKeydown:Ce,onFocus:ye,onBlur:be,onCompositionstart:H,onCompositionupdate:H,onCompositionend:H},Se.value),null),me.value&&f(Y,{prefix:l,class:`${l}-clear-btn`,onClick:xe},{default:()=>[f(Fe,null,null)]}),(a.suffix||!!e.maxLength&&e.showWordLimit||!!E.value)&&f("span",{class:[`${l}-suffix`,{[`${l}-suffix-has-feedback`]:E.value}]},[!!e.maxLength&&e.showWordLimit&&f("span",{class:`${l}-word-limit`},[z.value,Te("/"),h.value]),(o=a.suffix)==null?void 0:o.call(a),!!E.value&&f(Qe,{type:E.value},null)])])};return{inputRef:i,render:()=>a.prepend||a.append||e.prepend||e.append?f("span",T({class:$e.value},te.value),[(a.prepend||e.prepend)&&f("span",{class:`${l}-prepend`},[a.prepend?a.prepend():e.prepend]),le(!0),(a.append||e.append)&&f("span",{class:`${l}-append`},[a.append?a.append():e.append])]):le()}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}}),q=L({name:"InputSearch",props:{searchButton:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String},buttonText:{type:String},buttonProps:{type:Object}},emits:{search:(e,t)=>!0},setup(e,{emit:t,slots:a}){const{size:s}=O(e),u=M("input-search"),{mergedSize:c}=fe(s),r=_(),v=m=>{r.value.inputRef&&t("search",r.value.inputRef.value,m)},l=()=>{var m;return f(Oe,null,[e.loading?f(de,null,null):f(Y,{onClick:v},{default:()=>[f(oe,null,null)]}),(m=a.suffix)==null?void 0:m.call(a)])},i=()=>{var m;let B={};return e.buttonText||a["button-default"]||a["button-icon"]?B={default:(m=a["button-default"])!=null?m:e.buttonText?()=>e.buttonText:void 0,icon:a["button-icon"]}:B={icon:()=>f(oe,null,null)},f(Ke,T({type:"primary",class:`${u}-btn`,disabled:e.disabled,size:c.value,loading:e.loading},e.buttonProps,{onClick:v}),B)};return{inputRef:r,render:()=>f(V,{ref:r,class:u,size:c.value,disabled:e.disabled},{prepend:a.prepend,prefix:a.prefix,suffix:e.searchButton?a.suffix:l,append:e.searchButton?i:a.append})}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});function en(e){const t=_(e);return[t,s=>{t.value=s}]}function nn(e,t){const{value:a}=O(t),[s,u]=en(P(a.value)?e:a.value);return J(a,r=>{P(r)&&u(void 0)}),[p(()=>P(a.value)?s.value:a.value),u,s]}const an=L({name:"InputPassword",components:{IconEye:De,IconEyeInvisible:Ne,AIconHover:Y,AInput:V},props:{visibility:{type:Boolean,default:void 0},defaultVisibility:{type:Boolean,default:!0},invisibleButton:{type:Boolean,default:!0}},emits:["visibility-change","update:visibility"],setup(e,{emit:t}){const{visibility:a,defaultVisibility:s}=O(e),u=_(),c=()=>{l(!r.value)},[r,v]=nn(s.value,Ge({value:a})),l=i=>{i!==r.value&&(t("visibility-change",i),t("update:visibility",i),v(i))};return{inputRef:u,mergedVisible:r,handleInvisible:c}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}}});function tn(e,t,a,s,u,c){const r=x("icon-eye"),v=x("icon-eye-invisible"),l=x("a-icon-hover"),i=x("a-input");return y(),C(i,{ref:"inputRef",type:e.mergedVisible?"password":"text"},Ae({_:2},[e.$slots.prepend?{name:"prepend",fn:S(()=>[w(e.$slots,"prepend")]),key:"0"}:void 0,e.$slots.prefix?{name:"prefix",fn:S(()=>[w(e.$slots,"prefix")]),key:"1"}:void 0,e.invisibleButton||e.$slots.suffix?{name:"suffix",fn:S(()=>[e.invisibleButton?(y(),C(l,{key:0,onClick:e.handleInvisible,onMousedown:t[0]||(t[0]=ue(()=>{},["prevent"])),onMouseup:t[1]||(t[1]=ue(()=>{},["prevent"]))},{default:S(()=>[e.mergedVisible?(y(),C(v,{key:1})):(y(),C(r,{key:0}))]),_:1},8,["onClick"])):ie("v-if",!0),w(e.$slots,"suffix")]),key:"2"}:void 0,e.$slots.append?{name:"append",fn:S(()=>[w(e.$slots,"append")]),key:"3"}:void 0]),1032,["type"])}var Q=X(an,[["render",tn]]);const ln=L({name:"InputGroup",setup(){return{prefixCls:M("input-group")}}});function on(e,t,a,s,u,c){return y(),se("div",{class:ce(e.prefixCls)},[w(e.$slots,"default")],2)}var Z=X(ln,[["render",on]]);const fn=Object.assign(V,{Search:q,Password:Q,Group:Z,install:(e,t)=>{We(e,t);const a=je(t);e.component(a+V.name,V),e.component(a+Z.name,Z),e.component(a+q.name,q),e.component(a+Q.name,Q)}});export{dn as B,Ze as E,Qe as F,fn as I,Ye as a,Je as o,Xe as p,nn as u};
