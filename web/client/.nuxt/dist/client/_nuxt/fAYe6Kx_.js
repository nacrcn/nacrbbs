import{P as K,_ as R}from"./B_wNtzkc.js";import{h as G,r as T,m as l,c as d,o as r,a as e,b as n,w as i,z as H,t as c,n as J,F as I,v as x,g as _,d as u,s as F,j as v,l as U,q as $}from"./CbujNTzC.js";import{B as Q}from"./DZyT-3wr.js";import{F as W,a as X}from"./DcU8bM7c.js";import{T as Y}from"./k-1F5wz5.js";import"./CWvt8Gu3.js";import{S as Z}from"./BC6OM_U-.js";import{_ as tt}from"./DlAUqK2U.js";import{M as p}from"./C4FomA2R.js";const et={class:"ButtonSection"},ot={class:"UserInfo"},st={class:"Avatar"},nt=["src"],at={class:"UserDetail"},it={class:"nickname"},rt={class:"time"},lt={class:"Content"},dt={class:"PostContent"},ct={class:"Title"},mt={class:"word"},_t=["src"],ut={key:1,class:"video-container"},pt=["src"],ft={class:"play-button"},vt={class:"PostActions"},yt={class:"Category"},gt={key:0},ht={class:"Interactions"},kt={class:"item"},Tt={class:"item"},wt={class:"item"},bt={__name:"ItemA",props:{data:{type:Object,default:()=>({})}},setup(a){const w=a,y=G();y.init();const g=o=>o>=1e3&&o<1e6?(o/1e3).toFixed(1)+"K":o>=1e6?(o/1e6).toFixed(1)+"M":o,h=T(!1),k=T({n_tid:w.data.id,n_html:""}),f=T(!1),B=async()=>{const o=await $().post("/api/ReportThreads",k.value);o.code===200?(f.value=!1,p.success(o.msg)):p.error(o.msg)},N=async()=>{try{const o=await $().post("/api/DelThreads",{id:w.data.id});o.code==200?(p.success("删除成功"),window.location.reload()):p.error(o.message||"删除失败")}catch(o){p.error(o.message)}};return(o,t)=>{const S=l("icon-more"),m=Q,M=l("icon-play-circle-fill"),b=Z,P=l("icon-eye"),A=l("icon-message"),D=l("icon-thumb-up"),j=l("icon-edit"),z=l("icon-info-circle"),L=l("icon-delete"),O=K,V=R,q=Y,C=X,E=W;return r(),d("div",{class:"Itemlist",onClick:t[8]||(t[8]=s=>("navigateTo"in o?o.navigateTo:v(U))("/threads/"+a.data.id))},[e("div",et,[n(m,{onClick:t[0]||(t[0]=H(s=>h.value=!0,["stop"]))},{icon:i(()=>[n(S)]),_:1})]),e("div",ot,[e("div",st,[e("img",{src:a.data.user?.n_avatar,alt:""},null,8,nt)]),e("div",at,[e("p",it,c(a.data.user?.n_nickname),1),e("p",rt,c(a.data.n_time),1)])]),e("div",lt,[e("div",dt,[e("p",ct,c(a.data.n_name),1),e("p",mt,c(a.data.n_profile),1)]),e("div",{class:J(["ImageList",{one:a.data.n_resources&&a.data.n_resources.length===1,two:a.data.n_resources&&a.data.n_resources.length===2}])},[(r(!0),d(I,null,x(a.data.n_resources,s=>(r(),d("div",{key:s.url,class:"media-item"},[s.type===1?(r(),d("img",{key:0,src:s.url,alt:""},null,8,_t)):_("",!0),s.type===2?(r(),d("div",ut,[e("video",{src:s.url},null,8,pt),e("div",ft,[n(M)])])):_("",!0)]))),128))],2),e("div",vt,[e("div",yt,[n(b,{wrap:""},{default:i(()=>[(r(!0),d(I,null,x(a.data.category,s=>(r(),d("div",{class:"Tag",key:s},[s.n_type==2?(r(),d("span",gt,"#")):_("",!0),u(" "+c(s.n_name),1)]))),128))]),_:1})])]),e("div",ht,[e("span",kt,[n(P,{class:"icon"}),e("span",null,c(g(a.data.n_read||0)),1)]),e("span",Tt,[n(A,{class:"icon"}),e("span",null,c(g(a.data.n_msgs||0)),1)]),e("span",wt,[n(D,{class:"icon"}),e("span",null,c(g(a.data.n_starts||0)),1)])])]),n(V,{modelValue:h.value,"onUpdate:modelValue":t[4]||(t[4]=s=>h.value=s),Title:"操作",Nook:""},{content:i(()=>[n(b,{wrap:""},{default:i(()=>[v(y).$state.UserInfo?.id==a.data.n_uid?(r(),F(m,{key:0,onClick:t[1]||(t[1]=s=>("navigateTo"in o?o.navigateTo:v(U))("/threadInfo/"+a.data.id)),style:{"border-radius":"20px"}},{icon:i(()=>[n(j)]),default:i(()=>[t[9]||(t[9]=u(" 编辑贴贴 ",-1))]),_:1})):_("",!0),n(m,{status:"warning",style:{"border-radius":"20px"},onClick:t[2]||(t[2]=s=>f.value=!0)},{icon:i(()=>[n(z)]),default:i(()=>[t[10]||(t[10]=u(" 举报帖子 ",-1))]),_:1}),v(y).$state.UserInfo?.id==a.data.n_uid?(r(),F(O,{key:1,onOk:t[3]||(t[3]=s=>N()),content:"确定删除吗?",type:"error"},{default:i(()=>[n(m,{status:"danger",style:{"border-radius":"20px"}},{icon:i(()=>[n(L)]),default:i(()=>[t[11]||(t[11]=u(" 删除贴贴 ",-1))]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1},8,["modelValue"]),n(V,{modelValue:f.value,"onUpdate:modelValue":t[7]||(t[7]=s=>f.value=s),Title:"举报",Nook:""},{content:i(()=>[n(E,{model:o.form,layout:"vertical"},{default:i(()=>[n(C,{field:"post",label:"举报原因"},{default:i(()=>[n(q,{class:"road",modelValue:k.value.n_html,"onUpdate:modelValue":t[5]||(t[5]=s=>k.value.n_html=s),placeholder:"请输入举报原因","max-length":200,"allow-clear":"","show-word-limit":""},null,8,["modelValue"])]),_:1}),n(C,{field:"post",label:""},{default:i(()=>[n(m,{type:"primary",class:"road",onClick:t[6]||(t[6]=s=>B())},{default:i(()=>[...t[12]||(t[12]=[u("提交",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},St=tt(bt,[["__scopeId","data-v-f870e63d"]]);export{St as _};
