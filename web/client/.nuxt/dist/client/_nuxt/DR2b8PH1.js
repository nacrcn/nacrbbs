import{h as y,p as w,r as d,e as I,c as u,o as p,a,g as b,k as h,t,j as _,b as B,w as L,d as V,n as C,z as x,l as M,q as v}from"./CbujNTzC.js";import{B as N}from"./DZyT-3wr.js";import{_ as T}from"./DlAUqK2U.js";import{M as i}from"./C4FomA2R.js";const $={class:""},z=["src"],F={class:"nickname"},D={class:"UserDetail"},G={class:"Item"},S={class:"Value"},j={class:"Item"},q={class:"Value"},A={class:"Item"},E={class:"Value"},R={key:0,class:"Follow"},H={__name:"UserBox",props:["id","info"],setup(m){const f=y();w();const l=m;let r=l.id;const s=d({}),c=async()=>{try{const e=await v().post("/api/GetUser",{id:r});e.code==200?s.value=e.data:i.error(e.message||"获取用户信息失败")}catch(e){i.error(e.message)}};I(()=>{l.info?(s.value=l.info,r=l.info.id):c()});const n=d(!1),g=async()=>{try{n.value=!0;const e=await v().post("/api/LikeUser",{id:s.value.id});n.value=!1,e.code==200?(i.success(e.msg),s.value.isLiked=!0,c()):i.error(e.msg||"关注失败")}catch(e){i.error(e.message)}};return(e,o)=>{const k=N;return p(),u("div",$,[a("div",{class:"UserInfo",onClick:o[1]||(o[1]=U=>("navigateTo"in e?e.navigateTo:_(M))("/upinfo/"+s.value.id))},[a("div",{style:h({backgroundImage:`url(${s.value?.n_userback})`}),class:"UserBack"},null,4),a("img",{src:s.value.n_avatar,alt:"用户头像"},null,8,z),a("p",F,t(s.value?.n_nickname),1),a("div",D,[a("div",G,[a("p",S,t(s.value?.posts||0),1),o[2]||(o[2]=a("p",{class:"Label"},"发帖数",-1))]),a("div",j,[a("p",q,t(s.value?.followers||0),1),o[3]||(o[3]=a("p",{class:"Label"},"粉丝数",-1))]),a("div",A,[a("p",E,t(s.value?.following||0),1),o[4]||(o[4]=a("p",{class:"Label"},"关注数",-1))])]),_(f).$state.UserInfo?.id!==s.value.id?(p(),u("div",R,[B(k,{loading:n.value,onClick:o[0]||(o[0]=x(U=>g(),["stop"])),class:C(["FollowBtn",{Close:s.value.isLiked}]),type:"primary"},{default:L(()=>[V(t(s.value.isLiked?"取消关注":"关注"),1)]),_:1},8,["loading","class"])])):b("",!0)])])}}},Q=T(H,[["__scopeId","data-v-bdc5d15e"]]);export{Q as _};
