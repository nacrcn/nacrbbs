import{h as w,m as B,c as h,o as d,a as o,g as m,s as g,t as l,w as c,d as u,j as v,l as D,b as p,D as M,q as I}from"./CbujNTzC.js";import{B as N}from"./DZyT-3wr.js";import"./CWvt8Gu3.js";import{P as x}from"./B_wNtzkc.js";import{T as V}from"./BiNgaM9F.js";import{_ as $}from"./DlAUqK2U.js";import{M as f}from"./C4FomA2R.js";const z={class:"comment-item"},A={class:"comment-avatar"},H=["src","alt"],L={class:"comment-content"},U={class:"comment-header"},j={class:"comment-author"},q={class:"comment-time"},O=["innerHTML"],P={key:0,class:"Hbs"},S={class:"comment-actions"},E={class:"comment-reply"},F={__name:"CommentItem",props:{data:{type:Object,required:!0,default:()=>({})},isAuthor:{type:Boolean,default:!1}},emits:["reply","like"],setup(e,{emit:y}){const k=w(),T=y,b=a=>{if(!a)return"";const t=new Date(a),n=new Date-t,s=60*1e3,r=60*s,i=24*r;return n<s?"刚刚":n<r?Math.floor(n/s)+"分钟前":n<i?Math.floor(n/r)+"小时前":n<i*7?Math.floor(n/i)+"天前":t.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},C=async a=>{try{const t=await I().post("/api/DelComments",{id:a});t.code==200?(f.success("删除评论成功"),T("reload")):f.error(t.message||"删除评论失败")}catch(t){f.error(t.message)}};return(a,t)=>{const _=V,n=B("icon-delete"),s=N,r=x;return d(),h("div",z,[o("div",A,[o("img",{src:e.data.user?.n_avatar||"/default-avatar.png",alt:e.data.user?.n_nickname},null,8,H)]),o("div",L,[o("div",U,[o("span",j,l(e.data.user?.n_nickname||"匿名用户"),1),e.isAuthor?(d(),g(_,{key:0,size:"mini",color:"arcoblue"},{default:c(()=>[...t[2]||(t[2]=[u("作者",-1)])]),_:1})):m("",!0),o("span",q,l(b(e.data.n_time)),1)]),o("div",{class:"comment-body",innerHTML:e.data.n_html},null,8,O),e.data.thread?(d(),h("div",P,[t[3]||(t[3]=u(" 回复帖子：",-1)),o("span",{onClick:t[0]||(t[0]=i=>("navigateTo"in a?a.navigateTo:v(D))("/threads/"+e.data.thread.id))},l(e.data.thread.n_name),1)])):m("",!0),o("div",S,[p(r,{onOk:t[1]||(t[1]=i=>C(e.data.id)),content:"确定删除吗?",type:"error"},{default:c(()=>[v(k).$state.UserInfo?.id==e.data.n_uid?(d(),g(s,{key:0,status:"danger",class:"action-btn",size:"mini",style:{"border-radius":"20px"}},{icon:c(()=>[p(n)]),default:c(()=>[t[4]||(t[4]=u(" 删除评论 ",-1))]),_:1})):m("",!0)]),_:1})]),o("div",E,[M(a.$slots,"default",{},void 0,!0)])])])}}},Y=$(F,[["__scopeId","data-v-d12ed6f4"]]);export{Y as _};
