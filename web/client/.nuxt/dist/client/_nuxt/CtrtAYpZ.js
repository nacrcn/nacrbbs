import{_ as ee}from"./Dh8LvoMP.js";import{a as te,B as ae}from"./DZyT-3wr.js";import{S as ne}from"./BC6OM_U-.js";import{a as se,R as oe}from"./BpxmKO7-.js";/* empty css        */import{S as E,T as re}from"./BiNgaM9F.js";import{C as P,E as G,Q as ie,G as w,R as le,b as o,ak as ce,a2 as L,e as A,B as de,c as x,o as h,D as ue,n as _e,H as K,I as Q,aj as q,a5 as me,h as ve,p as fe,r as B,a as i,s as pe,g as j,w as p,j as d,t as y,q as D,u as ye,d as k,F as H,v as F,A as ge,l as he}from"./CbujNTzC.js";import{_ as be}from"./DlAUqK2U.js";import{M as g}from"./C4FomA2R.js";import{c as $e}from"./7FLWgqLH.js";const O=Symbol("ArcoCard");var N=P({name:"Card",components:{Spin:E},props:{bordered:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},size:{type:String},headerStyle:{type:Object,default:()=>({})},bodyStyle:{type:Object,default:()=>({})},title:{type:String},extra:{type:String}},setup(e,{slots:a}){const t=G("card"),{size:l}=ie(e),{mergedSize:_}=te(l),s=w(()=>_.value==="small"||_.value==="mini"?"small":"medium"),c=b=>{const v=$e(b);return o("div",{class:`${t}-actions`},[o("div",{class:`${t}-actions-right`},[v.map((f,S)=>o("span",{key:`action-${S}`,class:`${t}-actions-item`},[f]))])])},u=le({hasMeta:!1,hasGrid:!1,slots:a,renderActions:c});ce(O,u);const C=w(()=>[t,`${t}-size-${s.value}`,{[`${t}-loading`]:e.loading,[`${t}-bordered`]:e.bordered,[`${t}-hoverable`]:e.hoverable,[`${t}-contain-grid`]:u.hasGrid}]);return()=>{var b,v,f,S,z,M,n;const r=!!((b=a.title)!=null?b:e.title),$=!!((v=a.extra)!=null?v:e.extra);return o("div",{class:C.value},[(r||$)&&o("div",{class:[`${t}-header`,{[`${t}-header-no-title`]:!r}],style:e.headerStyle},[r&&o("div",{class:`${t}-header-title`},[(S=(f=a.title)==null?void 0:f.call(a))!=null?S:e.title]),$&&o("div",{class:`${t}-header-extra`},[(M=(z=a.extra)==null?void 0:z.call(a))!=null?M:e.extra])]),a.cover&&o("div",{class:`${t}-cover`},[a.cover()]),o("div",{class:`${t}-body`,style:e.bodyStyle},[e.loading?o(E,null,null):(n=a.default)==null?void 0:n.call(a),a.actions&&!u.hasMeta&&c(a.actions())])])}}}),R=P({name:"CardMeta",props:{title:{type:String},description:{type:String}},setup(e,{slots:a}){const t=G("card-meta"),l=L(O);return A(()=>{l&&(l.hasMeta=!0)}),()=>{var _,s,c,u,C,b;const v=!!((_=a.title)!=null?_:e.title),f=!!((s=a.description)!=null?s:e.description);return o("div",{class:t},[(v||f)&&o("div",{class:`${t}-content`},[v&&o("div",{class:`${t}-title`},[(u=(c=a.title)==null?void 0:c.call(a))!=null?u:e.title]),f&&o("div",{class:`${t}-description`},[(b=(C=a.description)==null?void 0:C.call(a))!=null?b:e.description])]),(a.avatar||l?.slots.actions)&&o("div",{class:[`${t}-footer `,{[`${t}-footer-only-actions`]:!a.avatar}]},[a.avatar&&o("div",{class:`${t}-avatar`},[a.avatar()]),l&&l.slots.actions&&l.renderActions(l.slots.actions())])])}}});const xe=P({name:"CardGrid",props:{hoverable:{type:Boolean,default:!1}},setup(e){const a=G("card-grid"),t=L(O);return A(()=>{t&&(t.hasGrid=!0)}),{cls:w(()=>[a,{[`${a}-hoverable`]:e.hoverable}])}}});function Ce(e,a,t,l,_,s){return h(),x("div",{class:_e(e.cls)},[ue(e.$slots,"default")],2)}var T=de(xe,[["render",Ce]]);const Se=Object.assign(N,{Meta:R,Grid:T,install:(e,a)=>{K(e,a);const t=Q(a);e.component(t+N.name,N),e.component(t+R.name,R),e.component(t+T.name,T)}});var V=P({name:"Divider",props:{direction:{type:String,default:"horizontal"},orientation:{type:String,default:"center"},type:{type:String},size:{type:Number},margin:{type:[Number,String]}},setup(e,{slots:a}){const t=G("divider"),l=w(()=>e.direction==="horizontal"),_=w(()=>{const s={};if(e.size&&(s[l.value?"border-bottom-width":"border-left-width"]=q(e.size)?`${e.size}px`:e.size),e.type&&(s[l.value?"border-bottom-style":"border-left-style"]=e.type),!me(e.margin)){const c=q(e.margin)?`${e.margin}px`:e.margin;s.margin=l.value?`${c} 0`:`0 ${c}`}return s});return()=>{var s;const c=(s=a.default)==null?void 0:s.call(a),u=[t,`${t}-${e.direction}`,{[`${t}-with-text`]:c}];return o("div",{role:"separator",class:u,style:_.value},[c&&e.direction==="horizontal"&&o("span",{class:[`${t}-text`,`${t}-text-${e.orientation}`]},[c])])}}});const we=Object.assign(V,{install:(e,a)=>{K(e,a);const t=Q(a);e.component(t+V.name,V)}}),ze={class:"PayVerifyPage"},Me={class:"Page"},Be={class:"PageContent"},ke={class:"order-info"},Pe={class:"info-row"},Ge={class:"value"},je={class:"info-row"},De={class:"value"},Ne={class:"info-row"},Re={class:"value price"},Te={class:"info-row"},Ve={key:0,class:"items-list"},Ae={class:"item-name"},Oe={class:"item-detail"},Ue={class:"item-price"},Ie={class:"payment-info"},Ee={class:"payment-icon"},qe=["src"],He={class:"payment-details"},Fe={class:"payment-name"},Le={key:1,class:"payment-actions"},Ke={class:"total-amount"},Qe={class:"total-value"},Je={__name:"[id]",setup(e){const a=ve(),t=fe(),l=ye();console.log(t);const _=t.params.id,s=B({}),c=B("alipay"),u=B(!1),C=B([]);(async()=>{try{const n=await D().post("/api/GetPayMethod",{no:_});n.code===200?C.value=n.data:g.error(n.msg||"获取支付方式失败")}catch(n){console.error("获取支付方式失败:",n),g.error("获取支付方式失败")}})();const v=async()=>{try{const n=await D().post("/api/GetOrder",{no:_});n.code===200?s.value=n.data:g.error(n.msg||"获取订单详情失败")}catch(n){console.error("获取订单详情失败:",n),g.error("获取订单详情失败")}},f=n=>({1:"orange",2:"green",3:"red",4:"blue"})[n]||"gray",S=n=>({1:"待支付",2:"已支付",3:"已取消",4:"已完成"})[n]||"未知状态",z=()=>{l.go(-1)},M=async()=>{if(!c.value){g.warning("请选择支付方式");return}u.value=!0;try{const n=await D().post("/api/PayOrder",{no:s.value.n_no,paymethod:c.value,paydevice:window.navigator.userAgent.toLowerCase().includes("mobile")?2:1});if(n.code===200&&(g.success("支付请求已提交"),n.data.payUrl?window.open(n.data.payUrl,"_blank"):n.data.qrCode?g.info("请扫码完成支付"):(g.success("支付成功"),a.init(),he(t.query.return))),!n.code){const r=n,$=document.createElement("div");$.innerHTML=r,document.body.appendChild($),$.querySelector("form").submit()}}catch(n){console.error("支付失败:",n),g.error("支付失败，请重试")}finally{u.value=!1}};return A(()=>{v()}),(n,r)=>{const $=ee,J=re,W=we,U=Se,X=oe,Y=se,I=ae,Z=ne;return h(),x("div",ze,[o($,{title:"订单支付核对"}),i("div",Me,[i("div",Be,[o(U,{title:"订单信息",class:"order-card"},{default:p(()=>[i("div",ke,[i("div",Pe,[r[1]||(r[1]=i("span",{class:"label"},"订单编号：",-1)),i("span",Ge,y(d(s).n_no),1)]),i("div",je,[r[2]||(r[2]=i("span",{class:"label"},"创建时间：",-1)),i("span",De,y(d(s).n_creatertime),1)]),i("div",Ne,[r[3]||(r[3]=i("span",{class:"label"},"订单金额：",-1)),i("span",Re,"¥"+y(d(s).n_amount),1)]),i("div",Te,[r[4]||(r[4]=i("span",{class:"label"},"订单状态：",-1)),o(J,{color:f(d(s).n_type)},{default:p(()=>[k(y(S(d(s).n_type)),1)]),_:1},8,["color"])])]),o(W,null,{default:p(()=>[...r[5]||(r[5]=[k("商品详情",-1)])]),_:1}),d(s).n_item&&d(s).n_item.length>0?(h(),x("div",Ve,[(h(!0),x(H,null,F(d(s).n_item,m=>(h(),x("div",{key:m.id,class:"item-row"},[i("div",Ae,y(m.n_name),1),i("div",Oe,[i("span",null,"数量："+y(m.n_number),1),i("span",Ue,"¥"+y(m.n_price),1)])]))),128))])):j("",!0)]),_:1}),d(s).n_type==="1"?(h(),pe(U,{key:0,title:"选择支付方式",class:"payment-card"},{default:p(()=>[o(Y,{modelValue:d(c),"onUpdate:modelValue":r[0]||(r[0]=m=>ge(c)?c.value=m:null),direction:"vertical",class:"payment-methods"},{default:p(()=>[(h(!0),x(H,null,F(d(C),m=>(h(),x("div",{class:"payment-option",key:m.id},[o(X,{value:m.id},{default:p(()=>[i("div",Ie,[i("div",Ee,[i("img",{style:{width:"25px"},src:m.n_icon,alt:""},null,8,qe)]),i("div",He,[i("div",Fe,y(m.n_name),1)])])]),_:2},1032,["value"])]))),128))]),_:1},8,["modelValue"])]),_:1})):j("",!0),d(s).n_type==="1"?(h(),x("div",Le,[i("div",Ke,[r[6]||(r[6]=i("span",{class:"total-label"},"应付金额：",-1)),i("span",Qe,"¥"+y(d(s).n_amount),1)]),o(Z,{size:"large"},{default:p(()=>[o(I,{size:"large",onClick:z},{default:p(()=>[...r[7]||(r[7]=[k("返回",-1)])]),_:1}),o(I,{type:"primary",size:"large",loading:d(u),onClick:M},{default:p(()=>[...r[8]||(r[8]=[k(" 确认支付 ",-1)])]),_:1},8,["loading"])]),_:1})])):j("",!0)])])])}}},rt=be(Je,[["__scopeId","data-v-616d8a20"]]);export{rt as default};
