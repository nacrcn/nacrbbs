{"version":3,"file":"topup-DE5isGXG.js","sources":["../../../../pages/index/user/index/topup.vue"],"sourcesContent":["<template>\r\n    <div class=\"TopUpPage\">\r\n        <UserHeader title=\"余额充值\"></UserHeader>\r\n        <div class=\"Page\">\r\n            <div class=\"PageHeader\">\r\n                <h2>余额充值</h2>\r\n                <p class=\"current-balance\">当前余额：<span class=\"amount\">¥{{ currentBalance }}</span></p>\r\n            </div>\r\n\r\n            <div class=\"Pagecontent\">\r\n                <!-- 充值金额选择 -->\r\n                <div class=\"section\">\r\n                    <h3>选择充值金额</h3>\r\n                    <div class=\"amount-grid\">\r\n                        <div v-for=\"item in presetAmounts\" :key=\"item.amount\"\r\n                            :class=\"['amount-item', { active: from.price === item.amount }]\"\r\n                            @click=\"from.price = item.amount\">\r\n                            <div class=\"amount-value\">¥{{ item.amount }}</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- 自定义金额 -->\r\n                    <div class=\"custom-amount\">\r\n                        <a-input v-model=\"from.price\" placeholder=\"自定义金额\" :min=\"1\" :max=\"10000\"\r\n                            style=\"width: 200px\" />\r\n                        <span class=\"unit\">元</span>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <!-- 提交按钮 -->\r\n                <div class=\"section\">\r\n                    <a-button type=\"primary\" size=\"large\" :loading=\"loading\" @click=\"handleSubmit\" class=\"submit-btn\">\r\n                        立即充值 ¥{{ from.price }}\r\n                    </a-button>\r\n\r\n                    <div class=\"tips\">\r\n                        <p>• 充值成功后余额将立即到账</p>\r\n                        <p>• 如遇问题请联系客服</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { Message } from '@arco-design/web-vue';\r\n\r\n// 获取用户信息\r\nconst UserInfo = useUserInfo()\r\nUserInfo.init()\r\n\r\n// 响应式数据\r\nconst currentBalance = ref(UserInfo.$state.UserInfo?.n_balance || '0.00')\r\nconst selectedAmount = ref(0)\r\nconst customAmount = ref(null)\r\nconst loading = ref(false)\r\n\r\n// 预设充值金额\r\nconst presetAmounts = ref([\r\n    { amount: 10, bonus: 0 },\r\n    { amount: 50, bonus: 5 },\r\n    { amount: 100, bonus: 12 },\r\n    { amount: 200, bonus: 30 },\r\n    { amount: 500, bonus: 80 },\r\n    { amount: 1000, bonus: 200 }\r\n])\r\n\r\n\r\n\r\n// 计算最终金额\r\nconst finalAmount = computed(() => {\r\n    if (selectedAmount.value > 0) {\r\n        return selectedAmount.value\r\n    }\r\n    if (customAmount.value && customAmount.value > 0) {\r\n        return customAmount.value\r\n    }\r\n    return 0\r\n})\r\n\r\n// 计算赠送金额\r\nconst finalBonus = computed(() => {\r\n    const amount = finalAmount.value\r\n    const matched = presetAmounts.value.find(item => item.amount === amount)\r\n    return matched ? matched.bonus : 0\r\n})\r\n\r\n\r\n\r\nconst from = ref({\r\n    type: 1,\r\n    price: 10\r\n})\r\n\r\n// 提交充值\r\nconst handleSubmit = async () => {\r\n    loading.value = true\r\n    const res = await useApiFetch().post('/api/CreateOrder', {\r\n        from: JSON.stringify([from.value]),\r\n        path: window.location.href\r\n    })\r\n    if (res.code === 200) {\r\n        navigateTo('/user/order/' + res.data.order)\r\n    } else {\r\n        Message.error(res.msg)\r\n    }\r\n    loading.value = false\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.TopUpPage {}\r\n\r\n.Page {\r\n    background-color: #fff;\r\n    margin: 1px;\r\n    width: calc(100% - 2px);\r\n    border-radius: 20px;\r\n    overflow: hidden;\r\n    margin: 0px auto;\r\n\r\n    .PageHeader {\r\n        padding: 30px;\r\n        background: linear-gradient(135deg, #00c451 0%, #00dd88 100%);\r\n        color: white;\r\n        text-align: center;\r\n\r\n        h2 {\r\n            margin: 0 0 10px 0;\r\n            font-size: 24px;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .current-balance {\r\n            margin: 0;\r\n            font-size: 16px;\r\n            opacity: 0.9;\r\n\r\n            .amount {\r\n                font-weight: 600;\r\n                font-size: 20px;\r\n            }\r\n        }\r\n    }\r\n\r\n    .Pagecontent {\r\n        padding: 30px;\r\n        width: calc(100% - 60px);\r\n\r\n        .section {\r\n            margin-bottom: 40px;\r\n\r\n            h3 {\r\n                margin: 0 0 20px 0;\r\n                font-size: 18px;\r\n                font-weight: 600;\r\n                color: #333;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 充值金额网格\r\n    .amount-grid {\r\n        display: grid;\r\n        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\r\n        gap: 15px;\r\n        margin-bottom: 30px;\r\n\r\n        .amount-item {\r\n            border: 2px solid #e5e7eb;\r\n            border-radius: 12px;\r\n            padding: 20px 15px;\r\n            text-align: center;\r\n            cursor: pointer;\r\n            transition: all 0.3s ease;\r\n            position: relative;\r\n\r\n            &:hover {\r\n                border-color: #00c451;\r\n                transform: translateY(-2px);\r\n                box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);\r\n            }\r\n\r\n            &.active {\r\n                border-color: #00c451;\r\n                // background: linear-gradient(135deg, #0e6eff 0%, #0e6eff 100%);\r\n                // color: white;\r\n\r\n                .amount-bonus {\r\n                    color: rgba(255, 255, 255, 0.9);\r\n                }\r\n            }\r\n\r\n            .amount-value {\r\n                font-size: 24px;\r\n                font-weight: 700;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    // 自定义金额\r\n    .custom-amount {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 10px;\r\n\r\n        .unit {\r\n            font-size: 16px;\r\n            color: #666;\r\n        }\r\n    }\r\n\r\n    // 支付方式\r\n    .payment-methods {\r\n        .payment-item {\r\n            display: flex;\r\n            align-items: center;\r\n            padding: 20px;\r\n            border: 2px solid #e5e7eb;\r\n            border-radius: 12px;\r\n            margin-bottom: 15px;\r\n            cursor: pointer;\r\n            transition: all 0.3s ease;\r\n\r\n            &:hover {\r\n                border-color: #00c451;\r\n                background: #f9fafb;\r\n            }\r\n\r\n            &.active {\r\n                border-color: #00c451;\r\n                background: #f0f4ff;\r\n            }\r\n\r\n            .payment-icon {\r\n                margin-right: 15px;\r\n                font-size: 24px;\r\n                color: #00c451;\r\n            }\r\n\r\n            .payment-info {\r\n                flex: 1;\r\n\r\n                .payment-name {\r\n                    font-size: 16px;\r\n                    font-weight: 600;\r\n                    color: #333;\r\n                    margin-bottom: 4px;\r\n                }\r\n\r\n                .payment-desc {\r\n                    font-size: 14px;\r\n                    color: #666;\r\n                }\r\n            }\r\n\r\n            .payment-radio {\r\n                font-size: 20px;\r\n                color: #00c451;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 订单摘要\r\n    .order-summary {\r\n        background: #f9fafb;\r\n        border-radius: 12px;\r\n        padding: 25px;\r\n\r\n        .summary-item {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 15px;\r\n            font-size: 16px;\r\n\r\n            &.bonus {\r\n                color: #f59e0b;\r\n            }\r\n\r\n            &.total {\r\n                font-weight: 600;\r\n                font-size: 18px;\r\n                color: #333;\r\n                margin-top: 10px;\r\n            }\r\n\r\n            .value {\r\n                font-weight: 600;\r\n            }\r\n        }\r\n\r\n        .summary-divider {\r\n            height: 1px;\r\n            background: #e5e7eb;\r\n            margin: 20px 0;\r\n        }\r\n    }\r\n\r\n    // 提交按钮\r\n    .submit-btn {\r\n        width: 100%;\r\n        height: 50px;\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n        border-radius: 25px;\r\n        background: linear-gradient(135deg, #00c451 0%, #00c451 100%);\r\n        border: none;\r\n        margin-bottom: 20px;\r\n\r\n        &:hover {\r\n            opacity: 0.9;\r\n        }\r\n    }\r\n\r\n    .tips {\r\n        text-align: center;\r\n        color: #666;\r\n        font-size: 14px;\r\n        line-height: 1.6;\r\n\r\n        p {\r\n            margin: 5px 0;\r\n        }\r\n    }\r\n}\r\n\r\n// 响应式设计\r\n@media (max-width: 768px) {\r\n    .Page {\r\n        max-width: none;\r\n        width: calc(100%);\r\n\r\n        .PageHeader {\r\n            padding: 20px;\r\n\r\n            h2 {\r\n                font-size: 20px;\r\n            }\r\n\r\n            .current-balance {\r\n                font-size: 14px;\r\n\r\n                .amount {\r\n                    font-size: 18px;\r\n                }\r\n            }\r\n        }\r\n\r\n        .Pagecontent {\r\n\r\n            padding: 20px;\r\n\r\n            .amount-grid {\r\n                grid-template-columns: repeat(2, 1fr);\r\n                gap: 10px;\r\n\r\n                .amount-item {\r\n                    padding: 15px 10px;\r\n\r\n                    .amount-value {\r\n                        font-size: 20px;\r\n                    }\r\n                }\r\n            }\r\n\r\n            .payment-item {\r\n                padding: 15px;\r\n\r\n                .payment-icon {\r\n                    margin-right: 12px;\r\n                    font-size: 20px;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_unref","_ssrRenderList","_ssrRenderClass","_ssrInterpolate","_push","_parent","_toDisplayString"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,UAAM,WAAW,YAAA;AACjB,aAAS,KAAA;AAGT,UAAM,iBAAiB,IAAI,SAAS,OAAO,UAAU,aAAa,MAAM;AACxE,UAAM,iBAAiB,IAAI,CAAC;AAC5B,UAAM,eAAe,IAAI,IAAI;AAC7B,UAAM,UAAU,IAAI,KAAK;AAGzB,UAAM,gBAAgB,IAAI;AAAA,MACtB,EAAE,QAAQ,IAAI,OAAO,EAAA;AAAA,MACrB,EAAE,QAAQ,IAAI,OAAO,EAAA;AAAA,MACrB,EAAE,QAAQ,KAAK,OAAO,GAAA;AAAA,MACtB,EAAE,QAAQ,KAAK,OAAO,GAAA;AAAA,MACtB,EAAE,QAAQ,KAAK,OAAO,GAAA;AAAA,MACtB,EAAE,QAAQ,KAAM,OAAO,IAAA;AAAA,IAAI,CAC9B;AAKD,UAAM,cAAc,SAAS,MAAM;AAC/B,UAAI,eAAe,QAAQ,GAAG;AAC1B,eAAO,eAAe;AAAA,MAC1B;AACA,UAAI,aAAa,SAAS,aAAa,QAAQ,GAAG;AAC9C,eAAO,aAAa;AAAA,MACxB;AACA,aAAO;AAAA,IACX,CAAC;AAGkB,aAAS,MAAM;AAC9B,YAAM,SAAS,YAAY;AAC3B,YAAM,UAAU,cAAc,MAAM,KAAK,CAAA,SAAQ,KAAK,WAAW,MAAM;AACvE,aAAO,UAAU,QAAQ,QAAQ;AAAA,IACrC,CAAC;AAID,UAAM,OAAO,IAAI;AAAA,MACb,MAAM;AAAA,MACN,OAAO;AAAA,IAAA,CACV;AAGD,UAAM,eAAe,YAAY;AAC7B,cAAQ,QAAQ;AAChB,YAAM,MAAM,MAAM,cAAc,KAAK,oBAAoB;AAAA,QACrD,MAAM,KAAK,UAAU,CAAC,KAAK,KAAK,CAAC;AAAA,QACjC,eAAa,SAAS;AAAA,MAAA,CACzB;AACD,UAAI,IAAI,SAAS,KAAK;AAClB,mBAAW,iBAAiB,IAAI,KAAK,KAAK;AAAA,MAC9C,OAAO;AACH,gBAAQ,MAAM,IAAI,GAAG;AAAA,MACzB;AACA,cAAQ,QAAQ;AAAA,IACpB;;;;;AA5GS,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAM,eAAW,MAAA,CAAA,CAAA,mBAAA;AACN,YAAAC,mBAAA,uBAAA,EAAA,OAAM,UAAM,MAAA,OAAA,CAAA;2NAIyCC,MAAA,cAAA,CAAc,CAAA,iLAAA;AAQ3CC,oBAAAD,MAAA,aAAA,IAAR,SAAI;6BACsBE,eAAA,CAAA,eAAA,EAAA,QAAAF,MAAA,IAAA,EAAK,UAAU,KAAK,OAAA,CAAM,CAAA,iEAE9BG,eAAA,KAAK,MAAM;;;;QAM3B,YAAAH,MAAA,IAAA,EAAK;AAAA,QAAL,uBAAA,CAAA,WAAAA,MAAA,IAAA,EAAK,QAAK;AAAA,QAAE,aAAY;AAAA,QAAS,KAAK;AAAA,QAAI,KAAK;AAAA,QAC7D,OAAA,EAAA,SAAA,QAAA;AAAA,MAAA;;;QAQE,MAAK;AAAA,QAAU,MAAK;AAAA,QAAS,SAASA,MAAA,OAAA;AAAA,QAAU,SAAO;AAAA,QAAc,OAAM;AAAA,MAAA;yBAArF,CAEW,GAAAI,QAAAC,UAAA,aAAA;;AADED,mBAAA,UAAAD,eAAAH,MAAA,IAAA,EAAK,KAAK,CAAA,EAAA;AAAA;;8BAD2E,YACxFM,gBAAGN,MAAA,IAAA,EAAK,KAAK,GAAA,CAAA;AAAA,YAAA;AAAA;;;;;;;;;;;;;;;"}