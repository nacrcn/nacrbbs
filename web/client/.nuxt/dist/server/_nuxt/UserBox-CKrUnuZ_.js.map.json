{"file":"UserBox-CKrUnuZ_.js","mappings":";;;;;;;;;;;AAuCA,UAAM,WAAW,YAAW;AAEd,aAAQ;AAEtB,UAAM,QAAQ;AACd,QAAI,KAAK,MAAM;AACf,UAAM,QAAQ,IAAI,EAAE;AAEpB,UAAM,UAAU,YAAY;AACxB,UAAI;AACA,cAAM,MAAM,MAAM,cAAc,KAAK,gBAAgB;AAAA,UACjD;AAAA,QACZ,CAAS;AACD,YAAI,IAAI,QAAQ,KAAK;AACjB,gBAAM,QAAQ,IAAI;AAAA,QACtB,OAAO;AACH,kBAAQ,MAAM,IAAI,WAAW,UAAU;AAAA,QAC3C;AAAA,MACJ,SAAS,OAAO;AACZ,gBAAQ,MAAM,MAAM,OAAO;AAAA,MAC/B;AAAA,IACJ;AAYA,UAAM,UAAU,IAAI,KAAK;AAGzB,UAAM,WAAW,YAAY;AACzB,UAAI;AACA,gBAAQ,QAAQ;AAChB,cAAM,MAAM,MAAM,cAAc,KAAK,iBAAiB;AAAA,UAClD,IAAI,MAAM,MAAM;AAAA,QAC5B,CAAS;AACD,gBAAQ,QAAQ;AAChB,YAAI,IAAI,QAAQ,KAAK;AACjB,kBAAQ,QAAQ,IAAI,GAAG;AACvB,gBAAM,MAAM,UAAU;AACtB,kBAAO;AAAA,QACX,OAAO;AACH,kBAAQ,MAAM,IAAI,OAAO,MAAM;AAAA,QACnC;AAAA,MACJ,SAAS,OAAO;AACZ,gBAAQ,MAAM,MAAM,OAAO;AAAA,MAC/B;AAAA,IACJ;;;mBA3FSA,eAAAC,WAAA,EAAA,OAAM,GAAE,GAAA,MAAA,CAAA,uEAGkCC,eAAA,EAAA,iBAAA,OAAA,MAAA,OAAO,UAAU,IAAA,CAAA,+DAGlD,OAAK,MAAA,MAAM,QAAQ,oEACFC,eAAA,MAAA,OAAO,UAAU,mHAIZA,eAAA,MAAA,OAAO,SAAK,CAAA,yHAIZA,eAAA,MAAA,OAAO,aAAS,CAAA,yHAIhBA,eAAA,MAAA,OAAO,aAAS,CAAA;UAMlBC,MAAA,QAAA,EAAS,OAAO,UAAU,OAAO,MAAA,MAAM,IAAE;;;UACpD,SAAS,QAAA;AAAA,UAAU,qBAAY;UAAa,OAAK,CAAA,aAAA,EAAA,SAA2B,MAAA,MAAM,SAAO;AAAA,UAChG,MAAK;AAAA;2BADT,CAGW,GAAAC,QAAAC,UAAA,aAAA;;AADJ,cAAAD,OAAA,GAAAF,eAAA,MAAA,MAAM,UAAO,SAAA,IAAA,CAAA,EAAA;AAAA;;gBAAbI,gBAAAC,gBAAA,MAAA,MAAM,UAAO,SAAA,IAAA,GAAA,CAAA;AAAA;;;;;;;;;;;;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderStyle","_ssrInterpolate","_unref","_push","_parent","_createTextVNode","_toDisplayString"],"sources":["../../../../components/UserBox.vue"],"sourcesContent":["<template>\r\n    <div class=\"\">\r\n\r\n        <div class=\"UserInfo\" @click=\"navigateTo('/upinfo/' + Users.id)\">\r\n            <div :style=\"{ backgroundImage: `url(${Users?.n_userback})` }\" class=\"UserBack\">\r\n\r\n            </div>\r\n            <img :src=\"Users.n_avatar\" alt=\"用户头像\" />\r\n            <p class=\"nickname\">{{ Users?.n_nickname }}</p>\r\n\r\n            <div class=\"UserDetail\">\r\n                <div class=\"Item\">\r\n                    <p class=\"Value\">{{ Users?.posts || 0 }}</p>\r\n                    <p class=\"Label\">发帖数</p>\r\n                </div>\r\n                <div class=\"Item\">\r\n                    <p class=\"Value\">{{ Users?.followers || 0 }}</p>\r\n                    <p class=\"Label\">粉丝数</p>\r\n                </div>\r\n                <div class=\"Item\">\r\n                    <p class=\"Value\">{{ Users?.following || 0 }}</p>\r\n                    <p class=\"Label\">关注数</p>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- 关注按钮 -->\r\n            <div class=\"Follow\" v-if=\"UserInfo.$state.UserInfo?.id !== Users.id\">\r\n                <a-button :loading=\"loading\" @click.stop=\"LikeUser()\" :class=\"['FollowBtn', { 'Close': Users.isLiked }]\"\r\n                    type=\"primary\">\r\n                    {{ Users.isLiked ? '取消关注' : '关注' }}\r\n                </a-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { Message } from '@arco-design/web-vue';\r\nconst UserInfo = useUserInfo()\r\n\r\nconst route = useRoute()\r\n\r\nconst props = defineProps(['id', 'info'])\r\nlet id = props.id\r\nconst Users = ref({})\r\n/* 获取用户信息 GetUser */\r\nconst GetUser = async () => {\r\n    try {\r\n        const res = await useApiFetch().post('/api/GetUser', {\r\n            id: id\r\n        })\r\n        if (res.code == 200) {\r\n            Users.value = res.data\r\n        } else {\r\n            Message.error(res.message || '获取用户信息失败')\r\n        }\r\n    } catch (error) {\r\n        Message.error(error.message)\r\n    }\r\n}\r\n\r\n\r\nonMounted(() => {\r\n    if (props.info) {\r\n        Users.value = props.info\r\n        id = props.info.id\r\n    } else {\r\n        GetUser()\r\n    }\r\n})\r\n\r\nconst loading = ref(false)\r\n\r\n/* 关注用户 LikeUser */\r\nconst LikeUser = async () => {\r\n    try {\r\n        loading.value = true\r\n        const res = await useApiFetch().post('/api/LikeUser', {\r\n            id: Users.value.id\r\n        })\r\n        loading.value = false\r\n        if (res.code == 200) {\r\n            Message.success(res.msg)\r\n            Users.value.isLiked = true\r\n            GetUser()\r\n        } else {\r\n            Message.error(res.msg || '关注失败')\r\n        }\r\n    } catch (error) {\r\n        Message.error(error.message)\r\n    }\r\n}   \r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.UserInfo {\r\n    border-radius: 10px;\r\n    background-color: #fff;\r\n    overflow: hidden;\r\n    width: 100%;\r\n\r\n    .UserBack {\r\n        width: 100%;\r\n        height: 150px;\r\n        background-size: cover;\r\n        background-position: center;\r\n    }\r\n\r\n    img {\r\n        width: 70px;\r\n        height: 70px;\r\n        border-radius: 50%;\r\n        margin: 0 auto;\r\n        margin-top: -35px;\r\n        border: 2px solid #fff;\r\n        display: block;\r\n    }\r\n\r\n    .nickname {\r\n        text-align: center;\r\n        font-size: 15px;\r\n        color: #333;\r\n        margin-top: 10px;\r\n    }\r\n\r\n    .UserDetail {\r\n        display: flex;\r\n        gap: 10px;\r\n        margin-top: 10px;\r\n        background-color: #f5f9fc;\r\n        border-radius: 10px;\r\n        width: calc(100% - 40px);\r\n        margin: 10px;\r\n        padding: 10px;\r\n        justify-content: center;\r\n\r\n        .Item {\r\n            text-align: center;\r\n            width: 100%;\r\n\r\n            .Value {\r\n                font-size: 14px;\r\n                color: #333;\r\n            }\r\n\r\n            .Label {\r\n                font-size: 12px;\r\n                color: #666;\r\n                margin-top: 7px;\r\n            }\r\n        }\r\n    }\r\n\r\n    .Follow {\r\n        width: calc(100% - 20px);\r\n        padding: 10px;\r\n\r\n        .FollowBtn {\r\n            width: 100%;\r\n            border-radius: 20px;\r\n        }\r\n\r\n        .Close {\r\n            background-color: #999999;\r\n        }\r\n    }\r\n}\r\n</style>"],"version":3}